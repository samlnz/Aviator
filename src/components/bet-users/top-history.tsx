import React, { useEffect } from \"react\";\nimport { MoonLoader } from \"react-spinners\";\nimport \"./bets.scss\";\nimport { config } from \"../../config\";\n\nconst TopHistory = () => {\n  const [type, setType] = React.useState(0);\n  const [history, setHistory] = React.useState([]);\n  const [loadingEffect, setLoadingEffect] = React.useState(false);\n\n  const callDate = async (date: string) => {\n    try {\n      setLoadingEffect(true);\n      const response = await fetch(`${config.api}/get-${date}-history`);\n      if (response.ok) {\n        const data = await response.json();\n        setHistory(data.data);\n        setTimeout(() => {\n          setLoadingEffect(false);\n        }, 500);\n      } else {\n        console.log(`HTTP error! status: ${response.status}`);\n      }\n    } catch (error: any) {\n      console.log(\"callDate\", error);\n    }\n  };\n  useEffect(() => {\n    // Request of Day data\n    callDate(\"day\");\n  }, []);\n  return (\n    <>\n      <div className=\"navigation-switcher-wrapper\">\n        <div className=\"navigation-switcher\">\n          <div\n            className=\"slider\"\n            style={{ transform: `translate(${100 * type}px)` }}\n          ></div>\n          <button\n            onClick={() => {\n              setType(0);\n              callDate(\"day\");\n            }}\n            className={`tab`}\n          >\n            Day\n          </button>\n          <button\n            onClick={() => {\n              setType(1);\n              callDate(\"month\");\n            }}\n            className={`tab`}\n          >\n            Month\n          </button>\n          <button\n            onClick={() => {\n              setType(2);\n              callDate(\"year\");\n            }}\n            className={`tab`}\n          >\n            Year\n          </button>\n        </div>\n      </div>\n      <div className=\"top-list-wrapper\">\n        <div className=\"top-items-list scroll-y h-100\">\n          {loadingEffect ? (\n            <div className=\"flex items-center justify-center top-14\">\n              <MoonLoader\n                color=\"red\"\n                size={35}\n              />\n            </div>\n          ) : (\n            <>\n              {history.map((item: any, index: number) => (\n                <div key={index} className=\"bet-item\">\n                  <div className=\"main\">\n                    <div className=\"icon\">\n                      <img\n                        className=\"avatar\"\n                        alt=\"avatar\"\n                        src=\"/avatars/av-5.png\"\n                      ></img>\n                      <div className=\"username\">d***3</div>\n                    </div>\n                    <div className=\"score\">\n                      <div className=\"flex\">\n                        <div className=\"\">\n                          <span>Bet, INR:&nbsp;</span>\n                          <span></span>\n                        </div>\n                        <span className=\"amount\">\n                          {item.betAmount.toFixed(2)}\n                        </span>\n                      </div>\n                      <div className=\"flex\">\n                        <div className=\"\">\n                          <span>Cashed out:&nbsp;</span>\n                        </div>\n                        <span className=\"amount cashout\">\n                          {item.cashoutAt.toFixed(2)}x\n                        </span>\n                      </div>\n                      <div className=\"flex\">\n                        <div className=\"\">\n                          <span>Win, INR: &nbsp;</span>\n                        </div>\n                        <span className=\"amount\">\n                          {(item.cashoutAt * item.betAmount).toFixed(2)}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </>\n          )}\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default TopHistory;\n